<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cz 工具交集使用篇 | Hi, I&#39;m here</title>
    <meta name="description" content="Stella Blog">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="shortcut icon" type="image/x-icon" href="/stella/cute.gif">
    
    <link rel="preload" href="/stella/assets/css/0.styles.bea9ebe4.css" as="style"><link rel="preload" href="/stella/assets/js/app.2112237b.js" as="script"><link rel="preload" href="/stella/assets/js/2.2386d97d.js" as="script"><link rel="preload" href="/stella/assets/js/12.7fc9b655.js" as="script"><link rel="preload" href="/stella/assets/js/3.110e554a.js" as="script"><link rel="prefetch" href="/stella/assets/js/10.b6fcdb13.js"><link rel="prefetch" href="/stella/assets/js/11.6c138450.js"><link rel="prefetch" href="/stella/assets/js/13.1ea7d7af.js"><link rel="prefetch" href="/stella/assets/js/14.b66827b9.js"><link rel="prefetch" href="/stella/assets/js/15.8ddf4f14.js"><link rel="prefetch" href="/stella/assets/js/16.21e8f61a.js"><link rel="prefetch" href="/stella/assets/js/17.43fe9af9.js"><link rel="prefetch" href="/stella/assets/js/18.9c2e61f7.js"><link rel="prefetch" href="/stella/assets/js/19.9f6f7f58.js"><link rel="prefetch" href="/stella/assets/js/20.e1d28102.js"><link rel="prefetch" href="/stella/assets/js/21.0956db65.js"><link rel="prefetch" href="/stella/assets/js/22.7206555d.js"><link rel="prefetch" href="/stella/assets/js/4.a89924df.js"><link rel="prefetch" href="/stella/assets/js/5.ef4b734f.js"><link rel="prefetch" href="/stella/assets/js/6.d652d8c3.js"><link rel="prefetch" href="/stella/assets/js/7.272949a8.js"><link rel="prefetch" href="/stella/assets/js/8.4414a10d.js"><link rel="prefetch" href="/stella/assets/js/9.e48214ea.js">
    <link rel="stylesheet" href="/stella/assets/css/0.styles.bea9ebe4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/stella/" class="home-link router-link-active"><!----> <span class="site-name">Hi, I'm here</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/stella/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/stella/interview.html" class="nav-link">
  Interview
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Study Analysis" class="dropdown-title"><span class="title">Study Analysis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stella/study/express.html" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/koa.html" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/axios.html" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/vuex.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/router.html" class="nav-link">
  Vue-Router
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/domdiff.html" class="nav-link">
  Vue DOM-Diff
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/mvvm.html" class="nav-link">
  Vue-MVVM
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/ssr.html" class="nav-link">
  Vue-SSR
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/cz.html" class="nav-link router-link-exact-active router-link-active">
  Cz
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/ws.html" class="nav-link">
  ws
</a></li></ul></div></div><div class="nav-item"><a href="/stella/resume.html" class="nav-link">
  Resume
</a></div><div class="nav-item"><a href="https://github.com/StellaYangF/StellaYangF.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/stella/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/stella/interview.html" class="nav-link">
  Interview
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Study Analysis" class="dropdown-title"><span class="title">Study Analysis</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/stella/study/express.html" class="nav-link">
  Express
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/koa.html" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/axios.html" class="nav-link">
  Axios
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/vuex.html" class="nav-link">
  Vuex
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/router.html" class="nav-link">
  Vue-Router
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/domdiff.html" class="nav-link">
  Vue DOM-Diff
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/mvvm.html" class="nav-link">
  Vue-MVVM
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/ssr.html" class="nav-link">
  Vue-SSR
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/cz.html" class="nav-link router-link-exact-active router-link-active">
  Cz
</a></li><li class="dropdown-item"><!----> <a href="/stella/study/ws.html" class="nav-link">
  ws
</a></li></ul></div></div><div class="nav-item"><a href="/stella/resume.html" class="nav-link">
  Resume
</a></div><div class="nav-item"><a href="https://github.com/StellaYangF/StellaYangF.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Cz 工具交集使用篇</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/stella/study/cz.html#cz-工具交集使用篇" class="sidebar-link">Cz 工具交集使用篇</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/stella/study/cz.html#规范-git-提交说明" class="sidebar-link">规范 Git 提交说明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stella/study/cz.html#git-提交说明结构" class="sidebar-link">Git 提交说明结构</a></li></ul></li><li><a href="/stella/study/cz.html#commitizen" class="sidebar-link">Commitizen</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/stella/study/cz.html#commitizen-适配器" class="sidebar-link">Commitizen 适配器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stella/study/cz.html#cz-conventional-changelog" class="sidebar-link">cz-conventional-changelog</a></li><li class="sidebar-sub-header"><a href="/stella/study/cz.html#cz-customizable" class="sidebar-link">cz-customizable</a></li></ul></li><li><a href="/stella/study/cz.html#commitizen-校验" class="sidebar-link">Commitizen 校验</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stella/study/cz.html#commitlint" class="sidebar-link">commitlint</a></li><li class="sidebar-sub-header"><a href="/stella/study/cz.html#commitlint-config-conventional" class="sidebar-link">@commitlint/config-conventional</a></li><li class="sidebar-sub-header"><a href="/stella/study/cz.html#commitlint-config-cz" class="sidebar-link">commitlint-config-cz</a></li><li class="sidebar-sub-header"><a href="/stella/study/cz.html#validate-commit-msg" class="sidebar-link">validate-commit-msg</a></li></ul></li><li><a href="/stella/study/cz.html#commitizen-日志" class="sidebar-link">Commitizen 日志</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/stella/study/cz.html#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/stella/study/cz.html#参考" class="sidebar-link">参考</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="cz-工具交集使用篇"><a href="#cz-工具交集使用篇" class="header-anchor">#</a> Cz 工具交集使用篇</h2> <p>功能：</p> <ul><li><strong>规范</strong> Git 精准提交说明</li> <li>多人协作，后期<strong>协作</strong>及 <strong>Bug</strong> 处理有据可查</li> <li>可根据规范的提交说明快速生成<strong>日志</strong></li> <li>方便开发者或用户追踪项目开发信息和功能特性</li></ul> <p>目录：</p> <ul><li>介绍符合 Angular规范 的提交说明</li> <li>介绍 Cz (适配器、校验、日志) 使用方法</li></ul> <h2 id="规范-git-提交说明"><a href="#规范-git-提交说明" class="header-anchor">#</a> 规范 Git 提交说明</h2> <ul><li>提供更多<strong>历史信息</strong>，方便快速浏览</li> <li>过滤某些 commit, 便于筛选代码 <strong>review</strong></li> <li>追踪 commit 生成<strong>更新日志</strong></li> <li>关联 <strong>issue</strong></li></ul> <h3 id="git-提交说明结构"><a href="#git-提交说明结构" class="header-anchor">#</a> Git 提交说明结构</h3> <p>分三个部分： <strong>Header</strong>, <strong>Body</strong>, <strong>Footer</strong></p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Header<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>Body<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>Footer<span class="token operator">&gt;</span>
</code></pre></div></div> <h4 id="header"><a href="#header" class="header-anchor">#</a> Header</h4> <p><strong>Header</strong> 部分包括三个字段: <code>type</code>（必需）、<code>scope</code>（可选）和 <code>subject</code>（必需）。</p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>scope<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token operator">&lt;</span>subject<span class="token operator">&gt;</span>
</code></pre></div></div> <h5 id="type"><a href="#type" class="header-anchor">#</a> type</h5> <p>type用于说明 commit 的提交性质。</p> <table><thead><tr><th>值</th> <th>描述</th></tr></thead> <tbody><tr><td>feat</td> <td>新增一个功能</td></tr> <tr><td>fix</td> <td>修复一个 Bug</td></tr> <tr><td>docs</td> <td>文档变更</td></tr> <tr><td>style</td> <td>代码格式</td></tr> <tr><td>refeactor</td> <td>代码重构</td></tr> <tr><td>perf</td> <td>改善性能</td></tr> <tr><td>test</td> <td>测试</td></tr> <tr><td>build</td> <td>变更项目构建或外部依赖</td></tr> <tr><td>ci</td> <td>更改持续继承软件的配置和 package.json 中 <strong>scripts</strong> 命令</td></tr> <tr><td>chore</td> <td>变更构建流程或辅助工具</td></tr> <tr><td>revert</td> <td>代码回退</td></tr></tbody></table> <h5 id="scope"><a href="#scope" class="header-anchor">#</a> scope</h5> <p>scope 说明 commit 影响的<strong>范围</strong>。scope 依据项目而定，例如在业务项目中可以依据<strong>菜单</strong>或者<strong>功能模块</strong>划分，如果是组件库开发，则可以依据<strong>组件</strong>划分。</p> <blockquote><p>Tip: scope 可选</p></blockquote> <h5 id="subject"><a href="#subject" class="header-anchor">#</a> subject</h5> <p>subject 是 commit 的简短描述。</p> <h4 id="body"><a href="#body" class="header-anchor">#</a> Body</h4> <p>commit 的详细描述，说明代码提交的详细说明。</p> <h4 id="footer"><a href="#footer" class="header-anchor">#</a> Footer</h4> <p>如果代码的提交是<strong>不兼容变更</strong>或<strong>关闭缺陷</strong>，则 Footer 必需，否则可以省略。</p> <h5 id="不兼容变更"><a href="#不兼容变更" class="header-anchor">#</a> 不兼容变更</h5> <p>当前代码与上一个版本不兼容，则 Footer 以 <strong>BREAKING CHANGE</strong> 开头，后面是对变动的描述、以及变动的理由和迁移方法。</p> <h5 id="关闭缺陷"><a href="#关闭缺陷" class="header-anchor">#</a> 关闭缺陷</h5> <p>如果当前提交是针对特定的 issue，那么可以在 Footer 部分填写需要关闭的单个 issue 或一系列issues。</p> <h2 id="commitizen"><a href="#commitizen" class="header-anchor">#</a> Commitizen</h2> <ul><li><a href="https://github.com/commitizen/cz-cli" target="_blank" rel="noopener noreferrer">commitizen/cz-cli<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一个可以实现规范的提交说明的工具</li> <li>提供选择的提交信息类别，快速生成提交说明。安装cz工具:</li></ul> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i commitizen -g
</code></pre></div></div> <h2 id="commitizen-适配器"><a href="#commitizen-适配器" class="header-anchor">#</a> Commitizen 适配器</h2> <h3 id="cz-conventional-changelog"><a href="#cz-conventional-changelog" class="header-anchor">#</a> cz-conventional-changelog</h3> <p>如果需要在项目中使用 commitizen 生成符合 AngularJS 规范的提交说明，初始化cz-conventional-changelog 适配器：</p> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code>commitizen init cz-conventional-changelog --save --save-exact
</code></pre></div></div> <p>如果当前已经有其他适配器被使用，则会报以下错误，此时可以加上--force选项进行再次初始化</p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code>Error<span class="token operator">:</span> <span class="token constant">A</span> previous adapter is already configured<span class="token punctuation">.</span> Use <span class="token operator">--</span>force to override
</code></pre></div></div> <p>初始化命令主要进行了3件事情:</p> <ul><li>在项目中<strong>安装</strong> cz-conventional-changelog 适配器依赖</li> <li>将适配器依赖保存到package.json的 <strong>devDependencies</strong> 字段信息</li> <li>在 package.json 中新增 <strong>config.commitizen</strong> 字段信息，主要用于配置cz工具的适配器路径：</li></ul> <div class="highlight"><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 <span class="token property">&quot;cz-conventional-changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.1.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token property">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./node_modules/cz-conventional-changelog&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <p>接下里 <code>git cz</code> 代替 <code>git commit</code> 进行提交说明。</p> <h3 id="cz-customizable"><a href="#cz-customizable" class="header-anchor">#</a> cz-customizable</h3> <p>如果想定制项目的提交说明，可以使用 cz-customizable 适配器</p> <h4 id="安装-cz-customizable"><a href="#安装-cz-customizable" class="header-anchor">#</a> 安装 cz-customizable</h4> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i cz-customizable -D
</code></pre></div></div> <h4 id="更新-package-json-文件"><a href="#更新-package-json-文件" class="header-anchor">#</a> 更新 package.json 文件</h4> <p>将之前符合Angular规范的 cz-conventional-changelog 适配器路径改成 cz-customizable 适配器路径：</p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;cz-customizable&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.3.0&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token string">&quot;config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;commitizen&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node_modules/cz-customizable&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <h4 id="新建-cz-config-js-文件"><a href="#新建-cz-config-js-文件" class="header-anchor">#</a> 新建 .cz-config.js 文件</h4> <p>cz-customizable will first look for a file called .cz-config.js，alternatively add a config block in your package.json。</p> <p>官方提供了一个 <strong>.cz-config.js</strong> 示例文件 <a href="https://github.com/leonardoanalista/cz-customizable/blob/master/cz-config-EXAMPLE.js" target="_blank" rel="noopener noreferrer">cz-config-EXAMPLE.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，如下所示：</p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code><span class="token string">'use strict'</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>

  types<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'feat'</span><span class="token punctuation">,</span>     name<span class="token operator">:</span> <span class="token string">'feat:     A new feature'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'fix'</span><span class="token punctuation">,</span>      name<span class="token operator">:</span> <span class="token string">'fix:      A bug fix'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span>     name<span class="token operator">:</span> <span class="token string">'docs:     Documentation only changes'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'style'</span><span class="token punctuation">,</span>    name<span class="token operator">:</span> <span class="token string">'style:    Changes that do not affect the meaning of the code\n            (white-space, formatting, missing semi-colons, etc)'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'refactor: A code change that neither fixes a bug nor adds a feature'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'perf'</span><span class="token punctuation">,</span>     name<span class="token operator">:</span> <span class="token string">'perf:     A code change that improves performance'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span>     name<span class="token operator">:</span> <span class="token string">'test:     Adding missing tests'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'chore'</span><span class="token punctuation">,</span>    name<span class="token operator">:</span> <span class="token string">'chore:    Changes to the build process or auxiliary tools\n            and libraries such as documentation generation'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'revert'</span><span class="token punctuation">,</span>   name<span class="token operator">:</span> <span class="token string">'revert:   Revert to a commit'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'WIP'</span><span class="token punctuation">,</span>      name<span class="token operator">:</span> <span class="token string">'WIP:      Work in progress'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  scopes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'accounts'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'admin'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'exampleScope'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'changeMe'</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// it needs to match the value for field type. Eg.: 'fix'</span>
  <span class="token comment">/*
  scopeOverrides: {
    fix: [
      {name: 'merge'},
      {name: 'style'},
      {name: 'e2eTest'},
      {name: 'unitTest'}
    ]
  },
  */</span>
  <span class="token comment">// override the messages, defaults are as follows</span>
  messages<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">'Select the type of change that you\'re committing:'</span><span class="token punctuation">,</span>
    scope<span class="token operator">:</span> <span class="token string">'\nDenote the SCOPE of this change (optional):'</span><span class="token punctuation">,</span>
    <span class="token comment">// used if allowCustomScopes is true</span>
    customScope<span class="token operator">:</span> <span class="token string">'Denote the SCOPE of this change:'</span><span class="token punctuation">,</span>
    subject<span class="token operator">:</span> <span class="token string">'Write a SHORT, IMPERATIVE tense description of the change:\n'</span><span class="token punctuation">,</span>
    body<span class="token operator">:</span> <span class="token string">'Provide a LONGER description of the change (optional). Use &quot;|&quot; to break new line:\n'</span><span class="token punctuation">,</span>
    breaking<span class="token operator">:</span> <span class="token string">'List any BREAKING CHANGES (optional):\n'</span><span class="token punctuation">,</span>
    footer<span class="token operator">:</span> <span class="token string">'List any ISSUES CLOSED by this change (optional). E.g.: #31, #34:\n'</span><span class="token punctuation">,</span>
    confirmCommit<span class="token operator">:</span> <span class="token string">'Are you sure you want to proceed with the commit above?'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  allowCustomScopes<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  allowBreakingChanges<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token string">'fix'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  <span class="token comment">// limit subject length</span>
  subjectLimit<span class="token operator">:</span> <span class="token number">100</span>
  
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <h2 id="commitizen-校验"><a href="#commitizen-校验" class="header-anchor">#</a> Commitizen 校验</h2> <h3 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> commitlint</h3> <p>校验提交说明是否符合规范，安装校验工具 <a href="https://github.com/marionebl/commitlint" target="_blank" rel="noopener noreferrer">commitlint<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>：</p> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @commitlint/cli
</code></pre></div></div> <h3 id="commitlint-config-conventional"><a href="#commitlint-config-conventional" class="header-anchor">#</a> @commitlint/config-conventional</h3> <p>安装符合Angular风格的校验规则</p> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev @commitlint/config-conventional 
</code></pre></div></div> <p>在项目中新建commitlint.config.js文件并设置校验规则：</p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <p>安装huksy（git钩子工具）</p> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> husky --save-dev
</code></pre></div></div> <p>在package.json中配置git commit提交时的校验钩子：</p> <div class="highlight"><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;husky&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;hooks&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commit-msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commitlint -E HUSKY_GIT_PARAMS&quot;</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>
</code></pre></div></div> <p>需要注意，使用该校验规则不能对.cz-config.js进行不符合Angular规范的定制处理，例如之前的汉化，此时需要将.cz-config.js的文件按照官方示例文件cz-config-EXAMPLE.js进行符合Angular风格的改动。</p> <h3 id="commitlint-config-cz"><a href="#commitlint-config-cz" class="header-anchor">#</a> commitlint-config-cz</h3> <p>如果是使用cz-customizable适配器做了破坏Angular风格的提交说明配置，那么不能使用 <strong>@commitlint/config-conventional</strong> 规则进行提交说明校验，可以使用commitlint-config-cz对定制化提交说明进行校验。</p> <p>安装校验规则：</p> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> commitlint-config-cz --save-dev
</code></pre></div></div> <p>然后加入commitlint校验规则配置：</p> <div class="highlight"><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'cz'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <h3 id="validate-commit-msg"><a href="#validate-commit-msg" class="header-anchor">#</a> validate-commit-msg</h3> <p>除了使用commitlint校验工具，也可以使用 <a href="https://github.com/Frikki/validate-commit-message" target="_blank" rel="noopener noreferrer">validate-commit-msg<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 校验工具对cz提交说明是否符合Angular规范进行校验。</p> <h2 id="commitizen-日志"><a href="#commitizen-日志" class="header-anchor">#</a> Commitizen 日志</h2> <p>如果使用了cz工具集，配套conventional-changelog可以快速生成开发日志：</p> <div class="highlight"><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> conventional-changelog -D
</code></pre></div></div> <p>在pacage.json中加入生成日志命令：</p> <div class="highlight"><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;changelog&quot;</span><span class="token operator">:</span> <span class="token string">&quot;conventional-changelog -p angular -i CHANGELOG.md -s -r 0 &amp;&amp; git add CHANGELOG.md&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <p>执行 <code>npm run changelog</code> 后可查看生产的日志 CHANGELOG.md。</p> <p>问题
执行 <code>npm run changelog</code> 运营脚本，提示错误：
'conventional-changelog' 不是内部或外部命令，也不是可运行的程序</p> <p>解决
<code>npm install -g conventional-changelog-cli</code> 全局安装即可</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>后续可实现插件机制，规范代码提交说明。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://juejin.im/post/5cc4694a6fb9a03238106eb9#heading-4" target="_blank" rel="noopener noreferrer">Cz 工具集<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://github.com/Frikki/validate-commit-message" target="_blank" rel="noopener noreferrer">validate-commit-msg<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/stella/assets/js/app.2112237b.js" defer></script><script src="/stella/assets/js/2.2386d97d.js" defer></script><script src="/stella/assets/js/12.7fc9b655.js" defer></script><script src="/stella/assets/js/3.110e554a.js" defer></script>
  </body>
</html>
